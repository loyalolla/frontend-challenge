{"version":3,"sources":["components/App/App.module.scss","components/Card/Card.module.scss","utils/Api.js","utils/LocalStorage.js","components/Card/Card.js","pages/HomePage/HomePage.js","pages/FavouritesPage/FavouritesPage.js","components/App/App.js","reportWebVitals.js","index.js","pages/HomePage/HomePage.module.scss"],"names":["module","exports","apiMap","search","page","this","prefix","key","value","localStorage","getItem","JSON","parse","e","prefixedKey","setItem","stringify","Card","props","id","url","useState","liked","setLiked","useEffect","ls","get","includes","className","styles","imgContainer","img","src","alt","loading","classnames","like","likeClicked","onClick","newFav","oldFav","filter","val","set","bind","HomePage","images","setImages","currentPage","setCurrentPage","setLoading","getCats","type","path","fetch","headers","process","then","response","json","request","data","container","imagesContainer","map","image","index","cardContainer","buttonContainer","button","nextPage","FavouritesPage","list","setList","favList","console","log","imageId","App","header","exact","activeClassName","linkActive","link","to","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sIACAA,EAAOC,QAAU,CAAC,OAAS,oBAAoB,KAAO,kBAAkB,WAAa,0B,mBCArFD,EAAOC,QAAU,CAAC,aAAe,2BAA2B,KAAO,mBAAmB,IAAM,kBAAkB,YAAc,4B,iLCCtHC,EAAS,CACbC,OAAQ,eAACC,EAAD,uDAAQ,EAAR,yEACsDA,K,gBC+BjD,M,WAhCb,aAAe,oBACbC,KAAKC,OAJoB,c,uCAO3B,SAAIC,GACF,IAAKA,EACH,OAAO,KAET,IAAMC,EAAQC,aAAaC,QAAb,UAAwBL,KAAKC,OAA7B,YAAuCC,IAErD,GAAqB,kBAAVC,EACT,IACE,OAAOG,KAAKC,MAAMJ,GAClB,MAAOK,GACP,OAAO,KAGX,OAAO,O,iBAGT,WAAsB,IAAlBN,EAAiB,uDAAX,GAAIC,EAAO,uCACnB,IAAKD,IAAQC,EACX,OAAO,KAGT,IAAMM,EAAW,UAAMT,KAAKC,OAAX,YAAqBC,GAGtC,OADAE,aAAaM,QAAQD,EAAaH,KAAKK,UAAUR,IAC1CA,M,8BCzBJ,SAASS,EAAKC,GAAQ,IACnBC,EAAYD,EAAZC,GAAIC,EAAQF,EAARE,IADc,EAEAC,oBAAS,GAFT,mBAEnBC,EAFmB,KAEZC,EAFY,KAyB1B,OAPAC,qBAAU,YACQC,EAAGC,IAAI,QAAU,IACrBC,SAASR,IACjBI,GAAS,KAEZ,IAGD,sBAAKK,UAAWC,IAAOC,aAAvB,UACE,qBAAKF,UAAWC,IAAOE,IAAKC,IAAKZ,EAAKa,IAAI,MAAMC,QAAQ,SACxD,qBACEN,UAAWO,IAAWN,IAAOO,KAAR,eAAiBP,IAAOQ,YAAcf,IAC3DgB,QA1Bc,SAACnB,GACnBI,GAAUD,GACV,IACIiB,EADEC,EAASf,EAAGC,IAAI,QAAU,GAK9Ba,EAFEC,EAAOb,SAASR,GAETqB,EAAOC,QAAO,SAACC,GAAD,OAASA,IAAQvB,KAGlC,sBAAOqB,GAAP,CAAerB,IAEvBM,EAAGkB,IAAI,MAAOJ,IAcWK,KAAK,KAAMzB,Q,oBC/BjC,SAAS0B,IAAY,IAAD,EACGxB,mBAAS,IADZ,mBAClByB,EADkB,KACVC,EADU,OAEa1B,mBAAS,GAFtB,mBAElB2B,EAFkB,KAELC,EAFK,OAGK5B,oBAAS,GAHd,mBAGlBa,EAHkB,KAGTgB,EAHS,KAKnBC,EAAU,SAAC/C,GACf8C,GAAW,GHJQ,SAACE,EAAMlC,GAC5B,GAAKkC,EAAL,CAGA,IAAIhC,EAAMlB,EAAOkD,GACE,oBAARhC,IACTA,EAAMA,EAAIF,IAEZ,IAAMmC,EAAI,UAdK,6BAcL,OAAiBjC,GAC3B,OAAOkC,MAAMD,EAAM,CACjBE,QAAS,CACP,YAlBUC,0CAoBXC,MAAK,SAACC,GAEP,OAAOA,EAASC,WGVhBC,CAAQ,SAAUxD,GAAMqD,MAAK,SAACI,GAC5BX,GAAW,GACXH,EAAU,GAAD,mBAAKD,GAAL,YAAgBe,SAG7BrC,qBAAU,WACR2B,EAAQH,KACP,IAOH,OACE,sBAAKpB,UAAWC,IAAOiC,UAAvB,UACE,qBAAKlC,UAAWC,IAAOkC,gBAAvB,SACGjB,EAAOkB,KAAI,SAACC,EAAOC,GAClB,OACE,qBAAKtC,UAAWC,IAAOsC,cAAvB,SACE,cAAClD,EAAD,CAAME,GAAI8C,EAAM9C,GAAIC,IAAK6C,EAAM7C,OADU6C,EAAM9C,GAAK+C,QAO5D,qBAAKtC,UAAWC,IAAOuC,gBAAvB,SACGlC,EACC,+JAEA,sBAAKN,UAAWC,IAAOwC,OAAvB,UACG,IACD,wBAAQ/B,QAxBE,WAClB,IAAMgC,EAAWtB,EAAc,EAC/BC,EAAeqB,GACfnB,EAAQmB,IAqBA,kIAA6D,YCvClE,SAASC,IAAkB,IAAD,EACPlD,mBAAS,IADF,mBACxBmD,EADwB,KAClBC,EADkB,KAQ/B,OANAjD,qBAAU,WACR,IAAMkD,EAAUjD,EAAGC,IAAI,QAAU,GACjC+C,EAAQC,GACRC,QAAQC,IAAIF,KACX,IAGD,qBAAK9C,UAAWC,IAAOiC,UAAvB,SACGU,EAAKR,KAAI,SAACa,GACT,OACE,8BACE,cAAC5D,EAAD,CACEE,GAAI0D,EACJzD,IAAG,4CAAuCyD,EAAvC,WAHGA,QCZb,SAASC,IACd,OACE,mCACE,eAAC,IAAD,WACE,yBAAQlD,UAAWC,IAAOkD,OAA1B,UACE,cAAC,IAAD,CAASC,OAAK,EAACC,gBAAiBpD,IAAOqD,WAAYtD,UAAWC,IAAOsD,KAAMC,GAAG,IAA9E,qEACA,cAAC,IAAD,CAASJ,OAAK,EAACC,gBAAiBpD,IAAOqD,WAAYtD,UAAWC,IAAOsD,KAAMC,GAAG,cAA9E,gGAEF,+BACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAO/B,KAAK,IAAI2B,OAAK,EAACK,UAAWxC,IACjC,cAAC,IAAD,CAAOQ,KAAK,cAAc2B,OAAK,EAACK,UAAWd,cChBvD,IAYee,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqB/B,MAAK,YAAkD,IAA/CgC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAClB,EAAD,MAEFmB,SAASC,eAAe,SAM1BZ,K,kBCfAtF,EAAOC,QAAU,CAAC,UAAY,4BAA4B,gBAAkB,kCAAkC,gBAAkB,kCAAkC,OAAS,4B","file":"static/js/main.b3142368.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"App_header__3MgOT\",\"link\":\"App_link__LYvb9\",\"linkActive\":\"App_linkActive__2eob8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imgContainer\":\"Card_imgContainer__3-iPs\",\"like\":\"Card_like__bd_kp\",\"img\":\"Card_img__1qgJC\",\"likeClicked\":\"Card_likeClicked__2HjLY\"};","const API_KEY = process.env.REACT_APP_API_KEY;\r\nconst BASE_URL = \"https://api.thecatapi.com\";\r\nconst apiMap = {\r\n  search: (page = 0) =>\r\n    `/v1/images/search?size=full&mime_types=jpg&limit=20&page=${page}`,\r\n};\r\n\r\nexport const request = (type, props) => {\r\n  if (!type) {\r\n    return;\r\n  }\r\n  let url = apiMap[type];\r\n  if (typeof url === \"function\") {\r\n    url = url(props);\r\n  }\r\n  const path = `${BASE_URL}${url}`;\r\n  return fetch(path, {\r\n    headers: {\r\n      \"x-api-key\": API_KEY,\r\n    },\r\n  }).then((response) => {\r\n    // todo proverka\r\n    return response.json();\r\n  });\r\n};\r\n","export const defaultPrefix = '__kitty_app'\r\n\r\nclass LocalStorage {\r\n  constructor() {\r\n    this.prefix = defaultPrefix;\r\n  }\r\n\r\n  get(key) {\r\n    if (!key) {\r\n      return null;\r\n    }\r\n    const value = localStorage.getItem(`${this.prefix}_${key}`);\r\n\r\n    if (typeof value === 'string') {\r\n      try {\r\n        return JSON.parse(value);\r\n      } catch (e) {\r\n        return null;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  set(key = '', value) {\r\n    if (!key || !value) {\r\n      return null;\r\n    }\r\n\r\n    const prefixedKey = `${this.prefix}_${key}`;\r\n\r\n    localStorage.setItem(prefixedKey, JSON.stringify(value));\r\n    return value;\r\n  }\r\n}\r\n\r\nexport default new LocalStorage();\r\n","// import {ReactComponent as Heart} from '../../icons/heart_empty.svg';\r\nimport classnames from \"classnames\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { ls } from \"../../utils\";\r\nimport styles from \"./Card.module.scss\";\r\n\r\nexport function Card(props) {\r\n  const { id, url } = props;\r\n  const [liked, setLiked] = useState(false);\r\n\r\n  const handleClick = (id) => {\r\n    setLiked(!liked);\r\n    const oldFav = ls.get(\"fav\") || [];\r\n    let newFav;\r\n\r\n    if (oldFav.includes(id)) {\r\n      // dislike\r\n      newFav = oldFav.filter((val) => val !== id);\r\n    } else {\r\n      // like\r\n      newFav = [...oldFav, id];\r\n    }\r\n    ls.set(\"fav\", newFav);\r\n  };\r\n  useEffect(() => {\r\n    const favList = ls.get(\"fav\") || [];\r\n    if (favList.includes(id)){\r\n        setLiked(true);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.imgContainer}>\r\n      <img className={styles.img} src={url} alt=\"img\" loading=\"lazy\" />\r\n      <div\r\n        className={classnames(styles.like, { [styles.likeClicked]: liked })}\r\n        onClick={handleClick.bind(null, id)}\r\n      ></div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Card } from \"../../components/Card\";\r\nimport { request } from \"../../utils\";\r\nimport styles from \"./HomePage.module.scss\";\r\n\r\nexport function HomePage() {\r\n  const [images, setImages] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const getCats = (page) => {\r\n    setLoading(true);\r\n    request(\"search\", page).then((data) => {\r\n      setLoading(false);\r\n      setImages([...images, ...data]);\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    getCats(currentPage);\r\n  }, []);\r\n  const handleClick = () => {\r\n    const nextPage = currentPage + 1;\r\n    setCurrentPage(nextPage);\r\n    getCats(nextPage);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.imagesContainer}>\r\n        {images.map((image, index) => {\r\n          return (\r\n            <div className={styles.cardContainer} key={image.id + index}>\r\n              <Card id={image.id} url={image.url} />\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      <div className={styles.buttonContainer}>\r\n        {loading ? (\r\n          <div>... загружаем еще котиков ...</div>\r\n        ) : (\r\n          <div className={styles.button}>\r\n            {\" \"}\r\n            <button onClick={handleClick}>загрузить еще котиков</button>{\" \"}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { Card } from \"../../components/Card\";\r\nimport { ls } from \"../../utils\";\r\nimport styles from '../HomePage/HomePage.module.scss';\r\n\r\nexport function FavouritesPage() {\r\n  const [list, setList] = useState([]);\r\n  useEffect(() => {\r\n    const favList = ls.get(\"fav\") || [];\r\n    setList(favList);\r\n    console.log(favList);\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      {list.map((imageId) => {\r\n        return (\r\n          <div key={imageId}>\r\n            <Card\r\n              id={imageId}\r\n              url={`https://cdn2.thecatapi.com/images/${imageId}.jpg`}\r\n            />\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import styles from './App.module.scss';\nimport React from 'react';\nimport { BrowserRouter as Router, Switch, Route, NavLink } from 'react-router-dom';\nimport { HomePage, FavouritesPage } from '../../pages';\n\nexport function App() {\n  return (\n    <>\n      <Router>\n        <header className={styles.header}>\n          <NavLink exact activeClassName={styles.linkActive} className={styles.link} to=\"/\">Все котики</NavLink>\n          <NavLink exact activeClassName={styles.linkActive} className={styles.link} to=\"/favourites\">Любимые котики</NavLink>\n        </header>\n        <main>\n          <Switch>\n            <Route path=\"/\" exact component={HomePage} />\n            <Route path=\"/favourites\" exact component={FavouritesPage} />\n          </Switch>\n        </main>\n      </Router>\n    </>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport {App} from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HomePage_container__1sdME\",\"imagesContainer\":\"HomePage_imagesContainer__2IWIK\",\"buttonContainer\":\"HomePage_buttonContainer__12_1-\",\"button\":\"HomePage_button__1ggw_\"};"],"sourceRoot":""}